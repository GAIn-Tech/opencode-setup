{
  "version": "0.1.0",
  "description": "Policy-based routing rules for OpenCode model selection",

  "models": {
    "openai/gpt-5.3-codex-spark": {
      "provider": "openai",
      "tier": "flagship",
      "base_weight": 0.65,
      "cost_per_1k_tokens": 0.014,
      "max_context": 200000,
      "strengths": ["code-generation", "debugging", "refactoring", "tool-use"],
      "default_success_rate": 0.93
    },
    "anthropic/claude-opus-4-6": {
      "provider": "anthropic",
      "tier": "flagship",
      "base_weight": 0.67,
      "cost_per_1k_tokens": 0.015,
      "max_context": 200000,
      "strengths": ["deep-reasoning", "architecture", "debugging", "security", "long-context"],
      "default_success_rate": 0.95
    },
    "google/antigravity-gemini-3-pro-high": {
      "provider": "google",
      "tier": "flagship",
      "base_weight": 0.60,
      "cost_per_1k_tokens": 0.00125,
      "max_context": 1000000,
      "strengths": ["long-context", "reasoning", "analysis", "planning"],
      "default_success_rate": 0.9
    },
    "google/antigravity-gemini-3-flash": {
      "provider": "google",
      "tier": "speed",
      "base_weight": 0.52,
      "cost_per_1k_tokens": 0.000075,
      "max_context": 1000000,
      "strengths": ["fast-iteration", "simple-tasks", "formatting", "summarization"],
      "default_success_rate": 0.88
    },
    "opencode/kimi-k2.5-free": {
      "provider": "opencode",
      "tier": "balanced",
      "base_weight": 0.56,
      "cost_per_1k_tokens": 0.0,
      "max_context": 262144,
      "strengths": ["orchestration", "deep-reasoning", "long-context", "architecture", "free-tier"],
      "default_success_rate": 0.91
    },
    "nvidia/z-ai/glm5": {
      "provider": "nvidia",
      "tier": "speed",
      "base_weight": 0.50,
      "cost_per_1k_tokens": 0.0,
      "max_context": 128000,
      "strengths": ["code-generation", "general-purpose", "fallback", "free-tier"],
      "default_success_rate": 0.85
    },
    "nvidia/minimaxai/minimax-m2.5": {
      "provider": "nvidia",
      "tier": "speed",
      "base_weight": 0.51,
      "cost_per_1k_tokens": 0.01,
      "max_context": 204800,
      "strengths": ["exploration", "alternative-perspective", "fast-iteration", "analysis"],
      "default_success_rate": 0.87
    }
  },

  "cost_tiers": {
    "mechanical":  { "max_budget": 0.02, "preferred_tier": "speed",     "description": "Formatting, linting, trivial fixes" },
    "trivial":     { "max_budget": 0.05, "preferred_tier": "speed",     "description": "Simple renames, small edits" },
    "low":         { "max_budget": 0.10, "preferred_tier": "balanced",  "description": "Standard code changes, tests" },
    "medium":      { "max_budget": 0.25, "preferred_tier": "balanced",  "description": "Feature implementation, refactoring" },
    "high":        { "max_budget": 0.50, "preferred_tier": "flagship",  "description": "Complex features, architecture" },
    "critical":    { "max_budget": 1.00, "preferred_tier": "flagship",  "description": "Critical bugs, security fixes" },
    "emergency":   { "max_budget": 2.00, "preferred_tier": "flagship",  "description": "Production incidents, urgent fixes" }
  },

  "complexity_routing": {
    "simple": {
      "description": "Mechanical tasks, formatting, linting",
      "cost_tier": "mechanical",
      "model_preference": ["google/antigravity-gemini-3-flash", "nvidia/z-ai/glm5", "nvidia/minimaxai/minimax-m2.5"]
    },
    "moderate": {
      "description": "Standard code tasks, tests, small features",
      "cost_tier": "low",
      "model_preference": ["google/antigravity-gemini-3-pro-high", "opencode/kimi-k2.5-free", "nvidia/minimaxai/minimax-m2.5"]
    },
    "high": {
      "description": "Complex features, multi-file refactors",
      "cost_tier": "high",
      "model_preference": ["openai/gpt-5.3-codex-spark", "opencode/kimi-k2.5-free", "google/antigravity-gemini-3-pro-high"]
    },
    "critical": {
      "description": "Architecture decisions, security, production issues",
      "cost_tier": "critical",
      "model_preference": ["anthropic/claude-opus-4-6", "openai/gpt-5.3-codex-spark", "opencode/kimi-k2.5-free"]
    }
  },

  "tuning": {
    "min_samples_for_tuning": 5,
    "decay_factor": 0.95,
    "success_rate_floor": 0.3,
    "success_rate_ceiling": 0.99,
    "latency_penalty_threshold_ms": 30000,
    "latency_penalty_factor": 0.1
  }
}
